#include <Wire.h>  
#include <TimeLib.h>  
#include <avr/pgmspace.h>
#include <string.h>
#include "DS3232RTC.h"  // DS3232 library that returns time as a time_t
bool Dot = true;  //Dot state
bool IsMatch = true; //Match state
int ScoreL; // Score Local
int ScoreV; // Score Visitor

void setup(){ 
  Serial.begin(9600); 
} 

int GetTimer(){
  tmElements_t Now;
  RTC.read(Now);
  //time_t Now = RTC.Now();// Getting the current Time and storing it into a DateTime object 
  
  int hour=Now.Hour;
  int minutes=Now.Minute;
  int second =Now.Second;
  if (second % 2==0) {Dot = false;}
    else {Dot = true;};
  //Serial.print("Time is: "); Serial.println(hour*100+minutes);
  return (hour*100+minutes);
  };
  
int GetTime(){
  tmElements_t Now;
  RTC.read(Now);
  //time_t Now = RTC.Now();// Getting the current Time and storing it into a DateTime object 
  
  int hour=Now.Hour;
  int minutes=Now.Minute;
  int second =Now.Second;
  if (second % 2==0) {Dot = false;}
    else {Dot = true;};
  //Serial.print("Time is: "); Serial.println(hour*100+minutes);
  return (hour*100+minutes);
  };

void TimeToArray(){
  int Now = GetTime();  // Get time
  for(int i=1;i<=4;i++){
    int digit = Now % 10; // get last digit in time
    if (i==1){
      Serial.print("Digit 4 is : ");Serial.print(digit);Serial.print(" ");
    }
    else if (i==2){
      Serial.print("Digit 3 is : ");Serial.print(digit);Serial.print(" ");
    }
    else if (i==3){
      Serial.print("Digit 2 is : ");Serial.print(digit);Serial.print(" ");
    }
    else if (i==4){
      Serial.print("Digit 1 is : ");Serial.print(digit);Serial.print(" ");
    }
    Now /= 10;
  } 
  Serial.println(); 
}

void ShowScore(){
    int Now;
    if (IsMatch){Serial.print("LLHC : ");Serial.print(ScoreL);Serial.print(" ");}
    if (IsMatch){
      Now = GetTimer();
    }
    else {
     Now = GetTime();  // Get time
    }
    int hour = Now / 100;
    int min = Now % 100;
    Serial.print(hour);Serial.print(":");Serial.print(min);Serial.print(" ");
    if (IsMatch){Serial.print("VISITOR : ");Serial.print(ScoreV);}
    Serial.println(" "); 
}


void loop(){
  //TimeToArray();
  ShowScore();
}
